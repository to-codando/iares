{
  "version": 3,
  "sources": ["../../../src/router/router.ts"],
  "sourcesContent": ["import type { Router, Execute } from \"./types\";\n//import { eventDrive } from \"../render\";\n\nexport const router: Router = ({ routes, context }) => {\n  const _routes = routes;\n  let _routerElement!: HTMLElement;\n\n  const execute: Execute = (validator, callback, error) => {\n    if (validator()) return callback({ isValid: validator() });\n\n    if (error) {\n      const erro = new Error(error().message);\n      erro.name = error().name;\n      throw erro;\n    }\n  };\n\n  const _bindListeners = () => {\n    window.addEventListener(\"hashchange\", () => {\n      //const payload: RouterObject = { status: true };\n      //eventDrive.emit(\"ON-DESTROY\", payload);\n      _mountRouteByHash(null);\n    });\n  };\n\n  const _setRouterElement = () => {\n    const routerElement = context?.querySelector(\"router-view\");\n\n    execute(\n      () => !!routerElement,\n      () => {\n        _routerElement = routerElement as HTMLElement;\n        return _routerElement;\n      },\n      () => ({\n        name: \"Router Error\",\n        message: \"Router element (router-view) is not defined and must be.\",\n      }),\n    );\n  };\n\n  const _loadMainRoute = () => {\n    const mainRoute = _getMainRoute();\n    execute(\n      () => !!mainRoute?.start,\n      () => mainRoute?.start && navigate(mainRoute.start),\n      () => ({\n        name: \"Router Error\",\n        message: \"Start router is not defined and must be.\",\n      }),\n    );\n  };\n\n  const _getMainRoute = () => _routes.find((route) => !!route?.start);\n\n  const _getRouteByHash = (hash: string) => {\n    return _routes.find((route) => route.regex.test(hash));\n  };\n\n  const _getRouteDefault = () => _routes.find((route) => route?.default);\n\n  const _mountRouteByHash = async (hash: string | null) => {\n    const hashValue = hash || window.location.hash || \"\";\n    const route = _getRouteByHash(hashValue) || _getRouteDefault();\n    _routerElement.innerHTML = \"\";\n    route?.mount({ context: _routerElement });\n  };\n\n  const _getHash = () => window.location.hash || null;\n\n  const _hasActiveRoute = () => !!_getHash();\n\n  const navigate = (path: string) => {\n    window.location.hash = path;\n  };\n\n  const init = () => {\n    _bindListeners();\n    _setRouterElement();\n    _hasActiveRoute() ? _mountRouteByHash(_getHash()) : _loadMainRoute();\n  };\n\n  return { init, navigate };\n};\n"],
  "mappings": ";;;;AAGO,IAAM,SAAiB,wBAAC,EAAE,QAAQ,QAAQ,MAAM;AACrD,QAAM,UAAU;AAChB,MAAI;AAEJ,QAAM,UAAmB,wBAAC,WAAW,UAAU,UAAU;AACvD,QAAI,UAAU,EAAG,QAAO,SAAS,EAAE,SAAS,UAAU,EAAE,CAAC;AAEzD,QAAI,OAAO;AACT,YAAM,OAAO,IAAI,MAAM,MAAM,EAAE,OAAO;AACtC,WAAK,OAAO,MAAM,EAAE;AACpB,YAAM;AAAA,IACR;AAAA,EACF,GARyB;AAUzB,QAAM,iBAAiB,6BAAM;AAC3B,WAAO,iBAAiB,cAAc,MAAM;AAG1C,wBAAkB,IAAI;AAAA,IACxB,CAAC;AAAA,EACH,GANuB;AAQvB,QAAM,oBAAoB,6BAAM;AAC9B,UAAM,gBAAgB,SAAS,cAAc,aAAa;AAE1D;AAAA,MACE,MAAM,CAAC,CAAC;AAAA,MACR,MAAM;AACJ,yBAAiB;AACjB,eAAO;AAAA,MACT;AAAA,MACA,OAAO;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,GAd0B;AAgB1B,QAAM,iBAAiB,6BAAM;AAC3B,UAAM,YAAY,cAAc;AAChC;AAAA,MACE,MAAM,CAAC,CAAC,WAAW;AAAA,MACnB,MAAM,WAAW,SAAS,SAAS,UAAU,KAAK;AAAA,MAClD,OAAO;AAAA,QACL,MAAM;AAAA,QACN,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF,GAVuB;AAYvB,QAAM,gBAAgB,6BAAM,QAAQ,KAAK,CAAC,UAAU,CAAC,CAAC,OAAO,KAAK,GAA5C;AAEtB,QAAM,kBAAkB,wBAAC,SAAiB;AACxC,WAAO,QAAQ,KAAK,CAAC,UAAU,MAAM,MAAM,KAAK,IAAI,CAAC;AAAA,EACvD,GAFwB;AAIxB,QAAM,mBAAmB,6BAAM,QAAQ,KAAK,CAAC,UAAU,OAAO,OAAO,GAA5C;AAEzB,QAAM,oBAAoB,8BAAO,SAAwB;AACvD,UAAM,YAAY,QAAQ,OAAO,SAAS,QAAQ;AAClD,UAAM,QAAQ,gBAAgB,SAAS,KAAK,iBAAiB;AAC7D,mBAAe,YAAY;AAC3B,WAAO,MAAM,EAAE,SAAS,eAAe,CAAC;AAAA,EAC1C,GAL0B;AAO1B,QAAM,WAAW,6BAAM,OAAO,SAAS,QAAQ,MAA9B;AAEjB,QAAM,kBAAkB,6BAAM,CAAC,CAAC,SAAS,GAAjB;AAExB,QAAM,WAAW,wBAAC,SAAiB;AACjC,WAAO,SAAS,OAAO;AAAA,EACzB,GAFiB;AAIjB,QAAM,OAAO,6BAAM;AACjB,mBAAe;AACf,sBAAkB;AAClB,oBAAgB,IAAI,kBAAkB,SAAS,CAAC,IAAI,eAAe;AAAA,EACrE,GAJa;AAMb,SAAO,EAAE,MAAM,SAAS;AAC1B,GAhF8B;",
  "names": []
}
